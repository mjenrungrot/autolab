python_bin: "python3"

test_command: "{{python_bin}} -m pytest"
# Replace this stub with a real dry-run command for your project.
dry_run_command: "{{python_bin}} -c \"print('autolab dry-run stub: configure dry_run_command in .autolab/verifier_policy.yaml')\""

template_fill:
  enabled: true
  command: "{{python_bin}} .autolab/verifiers/template_fill.py"
  stages:
    hypothesis: true
    design: true
    implementation: true
    implementation_review: true
    launch: true
    extract_results: true
    update_docs: true

template_fill_by_stage:
  hypothesis: "{{python_bin}} .autolab/verifiers/template_fill.py --stage hypothesis"
  design: "{{python_bin}} .autolab/verifiers/template_fill.py --stage design"
  implementation: "{{python_bin}} .autolab/verifiers/template_fill.py --stage implementation"
  implementation_review: "{{python_bin}} .autolab/verifiers/template_fill.py --stage implementation_review"
  launch: "{{python_bin}} .autolab/verifiers/template_fill.py --stage launch"
  extract_results: "{{python_bin}} .autolab/verifiers/template_fill.py --stage extract_results"
  update_docs: "{{python_bin}} .autolab/verifiers/template_fill.py --stage update_docs"

requirements_by_stage:
  hypothesis:
    tests: false
    dry_run: false
    schema: true
    env_smoke: false
    docs_target_update: false
  design:
    tests: false
    dry_run: false
    schema: true
    env_smoke: false
    docs_target_update: false
  implementation:
    tests: false
    dry_run: true
    schema: true
    env_smoke: false
    docs_target_update: false
  implementation_review:
    tests: false
    dry_run: true
    schema: true
    env_smoke: true
    docs_target_update: true
  launch:
    tests: false
    dry_run: false
    schema: true
    env_smoke: true
    docs_target_update: false
  extract_results:
    tests: false
    dry_run: false
    schema: true
    env_smoke: true
    docs_target_update: false
  update_docs:
    tests: false
    dry_run: false
    schema: true
    env_smoke: false
    docs_target_update: true

agent_runner:
  enabled: false
  runner: codex  # Options: codex, claude, custom
  # For claude runner only: set true only in trusted non-interactive automation contexts.
  claude_dangerously_skip_permissions: false
  # command is auto-set from runner preset; override with a custom command to use a specific tool
  stages:
    - hypothesis
    - design
    - implementation
    - implementation_review
    - launch
    - extract_results
    - update_docs
  edit_scope:
    mode: "iteration_plus_core"
    core_dirs:
      - "src"
      - "scripts"
      - ".autolab"
      - "docs"
      - "paper"
      - "tests"
    ensure_iteration_dir: true
  timeout_seconds: 3600

autorun:
  guardrails:
    max_same_decision_streak: 3
    max_no_progress_decisions: 2
    max_update_docs_cycles: 3
    max_generated_todo_tasks: 5
    on_breach: "human_review"
  auto_commit:
    mode: "meaningful_only"
  meaningful_change:
    require_implementation_progress: true
    require_git_for_progress: true
    on_non_git_behavior: "warn_and_continue"
    require_verification: true
    exclude_paths:
      - ".autolab/**"
      - "docs/todo.md"
      - "docs/wiki/**"
      - "experiments/*/docs_update.md"
